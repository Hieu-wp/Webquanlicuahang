<!-- admin-promotion-manager.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WinMart Admin ‚Äì Qu·∫£n l√Ω khuy·∫øn m√£i</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/admin-promotion-manager.css">
</head>
<body>

<!-- üî• NAVBAR gi·ªëng trang s·∫£n ph·∫©m -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="/admin">
      <img src="https://img.freepik.com/free-vector/w-logo-branding-identity-corporate-vector-logo-design_460848-18625.jpg?semt=ais_hybrid&w=740&q=80" alt="logo">
      WinMart Admin
    </a>

    <div class="ms-auto d-flex align-items-center gap-3">
      <span id="welcomeUser" class="fw-bold text-white"></span>
      <button id="logoutBtn" class="logoutBtn">ƒêƒÉng xu·∫•t</button>
    </div>
  </div>
</nav>

<!-- üî• MAIN CONTENT WRAPPER gi·ªëng file s·∫£n ph·∫©m -->
<div class="main-content">
  <div class="dashboard container-fluid mt-3">
    <!-- SIDEBAR -->
    <div class="dashboard-left">
      <div class="dashboard-title">B·∫£ng ƒëi·ªÅu khi·ªÉn</div>
      <div class="avatar">
        <img src="https://pm1.aminoapps.com/6346/0ee1a3e225190b0b742fe1cbf05e8098fd62d048_hq.jpg" alt="Avatar">
      </div>

      <a href="/admin"><i class="bi bi-speedometer2"></i> T·ªïng quan</a>
      <a href="/adminproducts"><i class="bi bi-box-seam"></i> Qu·∫£n l√Ω s·∫£n ph·∫©m</a>
      <a href="/admin-customer-manager"><i class="bi bi-people"></i> Qu·∫£n l√Ω kh√°ch h√†ng</a>
      <a href="/admin-invoice-manager"><i class="bi bi-receipt"></i> Qu·∫£n l√Ω h√≥a ƒë∆°n</a>
      <a href="/admin-promotion-manager" class="active"><i class="bi bi-percent"></i> Khuy·∫øn m√£i</a>
      <a href="/admin-staff-manager"><i class="bi bi-person-badge"></i> Qu·∫£n l√Ω nh√¢n vi√™n</a>
      <a href="/admin-categories"><i class="bi bi-grid-3x3-gap-fill"></i> Danh m·ª•c</a>
    </div>
    <div class="dashboard-right">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="mb-0 text-danger fw-bold">
          <i class="bi bi-ticket-perforated-fill me-2"></i> Qu·∫£n l√Ω Khuy·∫øn m√£i
        </h3>
        <button class="btn btn-danger rounded-pill px-4" id="btnOpenCreateModal">
          <i class="bi bi-plus-circle-fill"></i> T·∫°o voucher m·ªõi
        </button>
      </div>
      <div class="card">
        <div class="card-body table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="text-center">
              <tr>
                <th class="text-center">T√™n khuy·∫øn m√£i</th>
                <th class="text-center">Gi√° tr·ªã</th>
                <th class="text-center">√Åp d·ª•ng cho</th>
                <th class="text-center">Th·ªùi gian</th>
                <th class="text-center">ƒê∆°n t·ªëi thi·ªÉu</th>
                <th class="text-center">Tr·∫°ng th√°i</th>
                <th class="text-center">Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="voucherList"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="voucherModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="voucherModalTitle">
          <i class="bi bi-plus-circle-fill"></i> T·∫°o voucher m·ªõi
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <form id="voucherForm">
        <div class="modal-body">
          <input type="hidden" id="voucherId">

          <div class="mb-3">
            <label for="promoName" class="form-label">T√™n voucher <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="promoName" placeholder="VD: SALE20" required>
          </div>

          <div class="mb-3">
            <label for="promoType" class="form-label">Lo·∫°i voucher <span class="text-danger">*</span></label>
            <select class="form-select" id="promoType" required>
              <option value="">-- Ch·ªçn lo·∫°i --</option>
              <option value="percent">Gi·∫£m theo %</option>
              <option value="fixed">Gi·∫£m gi√° c·ªë ƒë·ªãnh</option>
              <option value="buy1get1">Mua 1 t·∫∑ng 1</option>
              <option value="combo">Combo khuy·∫øn m√£i</option>
            </select>
          </div>

          <div class="mb-3" id="valueInput">
            <label for="discountValue" class="form-label">Gi√° tr·ªã gi·∫£m <span class="text-danger">*</span></label>
            <div class="input-group">
              <input type="number" class="form-control" id="discountValue" placeholder="VD: 20" min="0" required>
              <span class="input-group-text" id="unit">%</span>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">√Åp d·ª•ng cho <span class="text-danger">*</span></label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="applyTo" id="applyProduct" value="product" checked>
              <label class="form-check-label" for="applyProduct"><i class="bi bi-box-seam"></i> S·∫£n ph·∫©m c·ª• th·ªÉ</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="applyTo" id="applyCategory" value="category">
              <label class="form-check-label" for="applyCategory"><i class="bi bi-grid-3x3-gap"></i> Danh m·ª•c</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="applyTo" id="applyAll" value="all">
              <label class="form-check-label" for="applyAll"><i class="bi bi-shop"></i> To√†n c·ª≠a h√†ng</label>
            </div>
          </div>

          <!-- CH·ªåN THEO √î T√çCH -->
          <div class="mb-3" id="targetSelection">
            <label class="form-label">Ch·ªçn ƒë·ªëi t∆∞·ª£ng √°p d·ª•ng</label>
            <div id="targetContainer" class="border rounded p-2 target-scroll">
              <p class="text-muted mb-0 small">
                Ch·ªçn "S·∫£n ph·∫©m" ho·∫∑c "Danh m·ª•c" b√™n tr√™n ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch.
              </p>
            </div>
            <div class="form-text text-muted">T√≠ch v√†o √¥ vu√¥ng ƒë·ªÉ ch·ªçn nhi·ªÅu m·ª•c.</div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label for="startDate" class="form-label">T·ª´ ng√†y <span class="text-danger">*</span></label>
              <input type="datetime-local" class="form-control" id="startDate" required>
            </div>
            <div class="col-md-6">
              <label for="endDate" class="form-label">ƒê·∫øn ng√†y <span class="text-danger">*</span></label>
              <input type="datetime-local" class="form-control" id="endDate" required>
            </div>
          </div>

          <div class="mb-3">
            <label for="minAmount" class="form-label">ƒê∆°n h√†ng t·ªëi thi·ªÉu (‚Ç´)</label>
            <input type="number" class="form-control" id="minAmount" placeholder="VD: 300000" min="0">
          </div>

          <div class="mb-4">
            <label for="description" class="form-label">M√¥ t·∫£ (hi·ªÉn th·ªã cho kh√°ch)</label>
            <textarea class="form-control" id="description" rows="3" placeholder="Gi·∫£m 20% cho ƒë∆°n t·ª´ 300k..."></textarea>
          </div>

        </div>

        <div class="modal-footer border-top pt-3 d-flex flex-wrap gap-2 justify-content-end">
          <button type="button" class="btn btn-outline-secondary" id="btnSaveDraft">
            <i class="bi bi-file-earmark"></i> L∆∞u nh√°p
          </button>
          <button type="submit" class="btn btn-primary">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- MODAL X√ìA -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">
          <i class="bi bi-exclamation-triangle-fill"></i> X√°c nh·∫≠n x√≥a
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a voucher n√†y? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
        <button type="button" class="btn btn-danger" id="btnConfirmDelete">X√≥a ngay</button>
      </div>
    </div>
  </div>
</div>

<!-- ALERT BOX -->
<div id="alertBoxCustomer">
  <div class="alert-content">
    <div id="alertIconCustomer">
      <i class="bi bi-x-circle-fill"></i>
    </div>
    <p id="alertMessageCustomer">Th√¥ng b√°o</p>
    <button type="button" class="confirm-btn" id="alertOkCustomer">OK</button>
  </div>
</div>

  <footer class="bg-dark text-white text-center py-2 mt-4">
    ¬© 2025 - H·ªá th·ªëng qu·∫£n l√Ω c·ª≠a h√†ng Walmart | <span id="adminFooterName"></span>
  </footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="javascript/admin-promotion-manager.js"></script>
<script src="javascript/footer.js"></script>
</body>
</html>
